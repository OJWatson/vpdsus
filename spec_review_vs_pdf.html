<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>vpdsus — Spec Review vs PDF plan (VPD susceptibility package plan v0.1, 2026‑02‑07) • vpdsus</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="vpdsus — Spec Review vs PDF plan (VPD susceptibility package plan v0.1, 2026‑02‑07)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">vpdsus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/data_access.html">Data access and caching</a></li>
    <li><a class="dropdown-item" href="articles/susceptibility_simple.html">Susceptibility estimates and WHO-style ranking plots</a></li>
    <li><a class="dropdown-item" href="articles/outbreak_models.html">Outbreak modelling</a></li>
    <li><a class="dropdown-item" href="articles/mechanistic_odin2.html">Mechanistic modelling in odin2 (scaffold)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OJWatson/vpdsus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>vpdsus — Spec Review vs PDF plan (VPD susceptibility package plan v0.1, 2026‑02‑07)</h1>
      <small class="dont-index">Source: <a href="https://github.com/OJWatson/vpdsus/blob/main/spec_review_vs_pdf.md" class="external-link"><code>spec_review_vs_pdf.md</code></a></small>
    </div>

<div id="vpdsus--spec-review-vs-pdf-plan-vpd-susceptibility-package-plan-v01-20260207" class="section level1">

<p>This document is a <strong>gap analysis</strong> of the current <code>OJWatson/vpdsus</code> repository against the original PDF plan (“Blueprint for an R package to estimate VPD susceptibility and link it to outbreak risk”).</p>
<div class="section level2">
<h2 id="executive-summary">Executive summary<a class="anchor" aria-label="anchor" href="#executive-summary"></a></h2>
<p><code>vpdsus</code> is <strong>substantially closer to its PDF spec</strong> than <code>motac</code> was: it already has a coherent R package, cache-aware WHO GHO access helpers, demography/panel scaffolding, susceptibility methods A–D, basic outbreak-modelling helpers, and an opt-in odin2 mechanistic pathway guarded for CI.</p>
<p>However, relative to the PDF’s stated primary deliverable (“end-to-end analysis pipeline that reproduces the main figures from scratch”) and its high-quality engineering goals, there are still <strong>notable gaps</strong>:</p>
<ol style="list-style-type: decimal"><li>
<strong>End-to-end reproducibility</strong> currently relies on example data and a minimal <code>targets</code> pipeline; it does not yet demonstrate full-from-scratch reproduction on real WHO/UN inputs with versioned artefacts.</li>
<li>
<strong>Data sources</strong> are implemented via WHO GHO OData endpoints, but the PDF emphasises “authoritative public sources primarily WHO and UN” with careful harmonisation—some of this exists (ISO3 harmonisation, caching), but the full provenance/artefact strategy needs strengthening.</li>
<li>
<strong>Modelling module</strong> exists but is still lightweight vs the spec’s goal (multiple outcome definitions, model evaluation, clear modelling datasets, and richer diagnostics).</li>
<li>
<strong>Mechanistic module</strong> exists and is correctly guarded, but the spec expects a clearer “success criteria” path and (optionally) inference hooks; those are not yet at the “paper-quality” bar.</li>
<li>
<strong>Documentation/site</strong> exists (pkgdown + vignettes), but the “public-ready release” milestone implies a more comprehensive reproducibility story and clearer guidance for a new user.</li>
</ol></div>
<div class="section level2">
<h2 id="what-the-pdf-requires-high-level">What the PDF requires (high-level)<a class="anchor" aria-label="anchor" href="#what-the-pdf-requires-high-level"></a></h2>
<p>The PDF’s primary deliverable is: - an installable R package + vignettes, and - an end-to-end analysis workflow that reproduces “main figures” from scratch.</p>
<p>Milestones in the PDF are M0–M7: - M0 scaffolding - M1 data access (WHO coverage + cases) - M2 demography + panel building - M3 susceptibility v1 + WHO-style plots - M4 statistical models linking susceptibility to outbreaks - M5 mechanistic scaffolding (odin2 simulation) - M6 optional inference hooks - M7 public-ready release (pkgdown + full reproducibility)</p>
</div>
<div class="section level2">
<h2 id="current-repository-status-vs-spec">Current repository: status vs spec<a class="anchor" aria-label="anchor" href="#current-repository-status-vs-spec"></a></h2>
<div class="section level3">
<h3 id="m0--repository-skeleton-and-professional-scaffolding">M0 — Repository skeleton and professional scaffolding<a class="anchor" aria-label="anchor" href="#m0--repository-skeleton-and-professional-scaffolding"></a></h3>
<p><strong>Implemented:</strong> mostly.</p>
<p><strong>Concrete gaps/corrections vs spec1.pdf:</strong></p>
<ul><li>
<strong>Scope needs to be explicit.</strong> The PDF expects a <em>minimum supported set</em> of antigens/diseases with clear defaults. The repo currently includes multiple placeholders/partially-verified indicator codes; this should be tightened so new users don’t accidentally rely on unverified defaults.</li>
<li>
<strong>Reproducibility story needs a clearer “happy path”.</strong> The PDF emphasises end-to-end reproduction; the repo has vignettes + <code>analysis/targets/</code>, but the README does not yet clearly explain the reproducibility workflow (what is downloaded live vs cached/fixture, how to re-run).</li>
<li>
<strong>Definition of Done (DoD) for M0 wasn’t explicitly stated.</strong> Add a checklist that must be satisfied before advancing to M1.</li>
</ul><p><strong>M0 Definition of Done (DoD):</strong></p>
<ol style="list-style-type: decimal"><li>
<strong>Project scaffolding</strong>
<ul><li>CI (R-CMD-check + lint + pkgdown) green on <code>main</code>.</li>
<li>
<code>.Rbuildignore</code> / <code>.gitignore</code> exclude local tooling artefacts and hidden dirs (no accidental notes).</li>
</ul></li>
<li>
<strong>User-facing docs</strong>
<ul><li>README has: package purpose, <em>minimum supported scope</em> (antigens/diseases), installation, quick-start, and a reproducibility section.</li>
<li>README explicitly documents optional/non-CRAN Suggests and the mechanistic gate (<code>VPDSUS_BUILD_ODIN2_VIGNETTE=1</code>).</li>
</ul></li>
<li>
<strong>Scope + defaults</strong>
<ul><li>
<code><a href="reference/vpd_indicators.html">vpd_indicators()</a></code> defaults are either (a) verified, or (b) clearly flagged as unverified and not used implicitly.</li>
<li>Any “discovery” helpers (e.g., <code><a href="reference/gho_find_indicator.html">gho_find_indicator()</a></code>) are documented as the way to find indicator codes.</li>
</ul></li>
<li>
<strong>Spec alignment</strong>
<ul><li>
<code>spec_review_vs_pdf.md</code> includes concrete corrections/gaps and points to the next milestone (M1) with acceptance criteria.</li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="m1--data-access-who-coverage-and-cases">M1 — Data access: WHO coverage and cases<a class="anchor" aria-label="anchor" href="#m1--data-access-who-coverage-and-cases"></a></h3>
<p><strong>Implemented:</strong> mostly. - <code><a href="reference/gho_get.html">gho_get()</a></code>, <code><a href="reference/gho_find_indicator.html">gho_find_indicator()</a></code>, <code><a href="reference/get_coverage.html">get_coverage()</a></code>, <code><a href="reference/get_cases.html">get_cases()</a></code> exist.</p>
<p><strong>Gaps / risks:</strong> - Indicator mapping defaults (<code><a href="reference/vpd_indicators.html">vpd_indicators()</a></code>) look partly placeholder-ish (e.g. <code>MEASLESCASES</code>); needs verification against actual GHO codes and/or explicit docs on how to discover the right codes. - Need explicit acceptance tests that hit the live API (possibly in a non-CRAN CI job) OR pinned cached fixtures with recorded request URLs.</p>
</div>
<div class="section level3">
<h3 id="m2--demography-retrieval-and-panel-building">M2 — Demography retrieval and panel building<a class="anchor" aria-label="anchor" href="#m2--demography-retrieval-and-panel-building"></a></h3>
<p><strong>Implemented:</strong> partial. - Demography module exists (<code>R/data-demography.R</code>, <code>R/panel-build.R</code>), but a detailed check against PDF’s preferred sources (UN WPP) and fallback strategy is needed.</p>
<p><strong>Gap:</strong> end-to-end build of a real country-year-age panel from raw sources is not yet demonstrated as a reproducible artefact.</p>
</div>
<div class="section level3">
<h3 id="m3--susceptibility-estimates-v1--who-style-plots">M3 — Susceptibility estimates v1 + WHO-style plots<a class="anchor" aria-label="anchor" href="#m3--susceptibility-estimates-v1--who-style-plots"></a></h3>
<p><strong>Implemented:</strong> partial-to-good. - Susceptibility methods exist: - A: <code><a href="reference/estimate_susceptible_static.html">estimate_susceptible_static()</a></code> - B: <code><a href="reference/estimate_susceptible_cohort.html">estimate_susceptible_cohort()</a></code> - C: <code><a href="reference/estimate_susceptible_cohort_ve.html">estimate_susceptible_cohort_ve()</a></code> - D: <code><a href="reference/estimate_susceptible_case_balance.html">estimate_susceptible_case_balance()</a></code> (incl. rho sensitivity) - Plotting/risk ranking exists (<code><a href="reference/risk_rank.html">risk_rank()</a></code>, plotting functions, theme).</p>
<p><strong>Gap:</strong> the PDF emphasises a minimum supported set of diseases/antigens and “WHO-style risk ranking figures”; we should verify the current plots match the intended outputs and add a “golden figure” regression test using pinned example data.</p>
</div>
<div class="section level3">
<h3 id="m4--statistical-modelling-linking-susceptibility-to-outbreaks">M4 — Statistical modelling linking susceptibility to outbreaks<a class="anchor" aria-label="anchor" href="#m4--statistical-modelling-linking-susceptibility-to-outbreaks"></a></h3>
<p><strong>Implemented:</strong> partial. - <code><a href="reference/make_modelling_panel.html">make_modelling_panel()</a></code>, <code><a href="reference/fit_outbreak_models.html">fit_outbreak_models()</a></code>, <code><a href="reference/evaluate_models.html">evaluate_models()</a></code> exist.</p>
<p><strong>Gaps:</strong> - Broader outcome definitions, model comparisons, and diagnostics (e.g. ROC/AUC, calibration curves, sensitivity to lag choice) are not yet present. - The PDF implies clean modelling datasets and evaluation; current helpers are a start but not yet research-grade.</p>
</div>
<div class="section level3">
<h3 id="m5--mechanistic-scaffolding-in-odin2-simulation">M5 — Mechanistic scaffolding in odin2 (simulation)<a class="anchor" aria-label="anchor" href="#m5--mechanistic-scaffolding-in-odin2-simulation"></a></h3>
<p><strong>Implemented:</strong> partial. - odin2 template compilation + dust2 simulation exists and templates are shipped. - Correctly guarded (Suggests + env var).</p>
<p><strong>Gaps:</strong> - Need a clear “mechanistic success” vignette that runs end-to-end when enabled, and produces a small set of sanity-check figures.</p>
</div>
<div class="section level3">
<h3 id="m6--optional-inference-hooks">M6 — Optional inference hooks<a class="anchor" aria-label="anchor" href="#m6--optional-inference-hooks"></a></h3>
<p><strong>Implemented:</strong> minimal. - Rho calibration work exists (files suggest this direction), but this needs review against the PDF’s requested pathways (reporting fraction, MCMC hooks) and a crisp DoD.</p>
</div>
<div class="section level3">
<h3 id="m7--public-ready-release-pkgdown--full-reproducibility">M7 — Public-ready release (pkgdown + full reproducibility)<a class="anchor" aria-label="anchor" href="#m7--public-ready-release-pkgdown--full-reproducibility"></a></h3>
<p><strong>Implemented:</strong> partial. - Pkgdown site exists. - Vignettes exist.</p>
<p><strong>Gaps:</strong> - “Full reproducibility from scratch” is not yet met: we need a single command pipeline that pulls raw sources (or clearly documented cached inputs), writes versioned artefacts, and regenerates the headline figures.</p>
</div>
</div>
<div class="section level2">
<h2 id="key-immediate-issues-to-address">Key immediate issues to address<a class="anchor" aria-label="anchor" href="#key-immediate-issues-to-address"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Authoritative, reproducible data artefacts</strong>: decide what is downloaded live vs shipped as pinned fixtures; write provenance metadata.</li>
<li>
<strong>End-to-end pipeline</strong>: strengthen <code>analysis/targets/</code> into a real reproduction pipeline that can (optionally) run from scratch and produce figures/tables.</li>
<li>
<strong>Modelling evaluation</strong>: expand modelling to include a small set of robust checks consistent with the PDF.</li>
</ol></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Oliver Watson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

