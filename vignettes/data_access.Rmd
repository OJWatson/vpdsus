---
title: "Data access and caching"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data access and caching}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

This vignette demonstrates the data access layer.

For reproducibility and fast vignette builds, we use a shipped example panel. For live downloads, see `gho_find_indicator()` and `get_coverage()`.

```{r}
library(vpdsus)

panel <- vpdsus_example_panel()
head(panel)
```

### Indicator discovery (deterministic example)

The WHO GHO API exposes an indicator catalogue. Use `gho_find_indicator()` to
search for the code you need, then pass that code into `get_coverage()` or
`get_cases()`.

This vignette uses a pinned fixture so it can run deterministically in CI:

```{r}
# Search the WHO GHO indicator metadata (offline fixture for this vignette)
m <- gho_find_indicator("measles", top_n = 10, offline = TRUE)
print(m)
```
